<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="screen" href="style/style.css" />
    <title>Document</title>
    <script>

        var todos = [{id:1,title:"Todotitle",description:"I'm baby sriracha hot chicken mixtape pabst organic air"},
                     {id:2,title:"Todotitle",description:"I'm baby sriracha hot chicken mixtape pabst organic air"},
                     {id:3,title:"Todotitle",description:"I'm baby sriracha hot chicken mixtape pabst organic air"}];
        var completedTodos = [{id:4,title:"Todotitle",author:"Author Author",description:"I'm baby sriracha hot chicken mixtape pabst organic air", completedDate:"22.12.20"},
                             {id:4,title:"Todotitle",author:"Author Author",description:"I'm baby sriracha hot chicken mixtape pabst organic air", completedDate:"22.12.20"},
                             {id:4,title:"Todotitle",author:"Author Author",description:"I'm baby sriracha hot chicken mixtape pabst organic air", completedDate:"22.12.20"} ]

        window.onload = startup;

        function startup(){
            var modal = document.getElementById("createTodoModal");

            var btn = document.getElementById("newTodo");

            var span = document.getElementsByClassName("close")[0];

            btn.onclick = function() {
                modal.style.display = "block";
            }

            addTodo();
            addCompletedTodos();


            function addTodo(){

                //Sletter alt som var der fra før, lager alt på nytt.
                document.getElementById("todoList").innerHTML=null;
            
                for(i=0;i<todos.length;i++){
                    var title = todos[i].title;
                    var description = todos[i].description;
                    var id = todos[i].id;

                    var listElement = document.createElement("li")
                    listElement.className = "todo";

                    var h3 = document.createElement("h3");
                    h3.innerHTML = title;

                    var p = document.createElement("p");
                    p.innerHTML = description;

                    //LAg med delete value
                    var deleteButton = document.createElement("button");
                        deleteButton.innerHTML = "Delete";
                        deleteButton.className="deleteButton";
                        deleteButton.value = id;

                    var completeButton = document.createElement("button");
                        completeButton.innerHTML = "Complete";
                        completeButton.className = "completeButton";
                        completeButton.value = id;

                    listElement.appendChild(h3);
                    listElement.appendChild(p);
                    listElement.appendChild(deleteButton);
                    listElement.appendChild(completeButton);

                    document.getElementById("todoList").appendChild(listElement);
                }
            }


            function addCompletedTodos(){
                
                //Adder først headingene: Gjør programmatisk sånn at en ikke sletter disse når funksjonen kalles på ny.
                    var headingRow = document.createElement("tr");
                    var headingTitle = document.createElement("th");
                        headingTitle.innerHTML = "Title";
                    var headingAuthor = document.createElement("th");
                        headingAuthor.innerHTML = "Author";
                    var headingDescription = document.createElement("th");
                        headingDescription.innerHTML = "Description";
                    var headingDate = document.createElement("th");
                        headingDate.innerHTML = "Completed Date:"

                        headingRow.appendChild(headingTitle); headingRow.appendChild(headingAuthor);
                        headingRow.appendChild(headingDescription);
                        headingRow.appendChild(headingDate);

                        document.getElementById("completedTodos").appendChild(headingRow);



                for(i=0;i<completedTodos.length;i++){
                    var title = completedTodos[i].title;
                    var description = completedTodos[i].description;
                    var author = completedTodos[i].author;
                    var date = completedTodos[i].completedDate;

                    var tableRow = document.createElement("tr");

                    var titleCell = document.createElement("td");
                        titleCell.innerHTML = title;
                    var descriptionCell = document.createElement("td"); 
                        descriptionCell.innerHTML = description;

                    var authorCell = document.createElement("td");
                        authorCell.innerHTML = author;
                    var dateCell = document.createElement("td");
                        dateCell.innerHTML = date;


                    tableRow.appendChild(titleCell);
                    tableRow.appendChild(authorCell);
                    tableRow.appendChild(descriptionCell);
                    tableRow.appendChild(dateCell);

                    document.getElementById("completedTodos").appendChild(tableRow);

                }
            }

            span.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }
    </script>
</head>
<body>
    <header>
        <h1 class="headerBar">HIOF</h1>

        <div id="userNameBar">
            <p class="headerBar">User user</p>
        </div>
    </header>
   
    <main>
        <button id="newTodo">+Todo </button>

        <!-- MODAL! -->

        <div id="createTodoModal" class="modal">
            <div class="modal-content">

                <div id=modalHeader>
                    <span class="close">&times;</span>
                    <h2>Create todo</h2>
                </div>
                <ul>
                    <li>
                        <label for="title">Title:</label>
                        <input type="text" id="title">
                    </li>

                    <li>
                        <label for="description">Description:</label>
                        <input type="text" id="description">
                    </li>

                    <li>
                        <label for="author">Author:</label>
                        <input type="text" id="author">
                    </li>
                </ul>
            </div>
        </div>

        <ul id="todoList">
              <li>test</li>
        </ul>

        <h2 id="completedTodosHeading">Completed todos</h2>
            <div id="checkboxContainer">
                <input type="checkbox" name="filterByDate" id="filterByDateCheckbox">
                <label for="filterByDate">Filter by date</label>
            </div>    

            <table id="completedTodos">

            </table>

        </main>
    
</body>
</html>